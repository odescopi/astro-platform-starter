<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GetInsightStream - Install Analytics</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; }
        .container { background: #f5f5f5; padding: 30px; border-radius: 10px; }
        .btn { background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; }
        .status { margin-top: 20px; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ GetInsightStream Analytics</h1>
        <p>Install real-time e-commerce analytics on your Shopify store in 2 minutes.</p>
        
        <div>
            <label for="shopDomain">Your Shopify Store Domain:</label>
            <input type="text" id="shopDomain" placeholder="your-store.myshopify.com" style="width: 100%; padding: 10px; margin: 10px 0;">
        </div>
        
        <button class="btn" onclick="installAnalytics()">Install Analytics</button>
        
        <div id="status" class="status" style="display: none;"></div>
    </div>

    <script>
        function installAnalytics() {
            const shopDomain = document.getElementById('shopDomain').value.trim();
            const statusDiv = document.getElementById('status');
            
            if (!shopDomain || !shopDomain.includes('.myshopify.com')) {
                showStatus('Please enter a valid Shopify domain (your-store.myshopify.com)', 'error');
                return;
            }

            showStatus('Installing analytics...', 'success');
            
            // 1. Inject the analytics script
            const script = document.createElement('script');
            script.src = 'https://getinsightstream.netlify.app/analytics.js';
            script.setAttribute('data-shop-domain', shopDomain);
            document.head.appendChild(script);
            
            // 2. Show installation instructions
            setTimeout(() => {
                showStatus(`
                    âœ… Analytics installed for ${shopDomain}<br><br>
                    <strong>Next Steps:</strong><br>
                    1. Copy this code to your Shopify theme:<br>
                    <code>&lt;script src="https://getinsightstream.netlify.app/analytics.js" data-shop-domain="${shopDomain}"&gt;&lt;/script&gt;</code><br><br>
                    2. Add to theme.liquid before &lt;/head&gt; tag<br>
                    3. Your analytics will start appearing in 5-10 minutes
                `, 'success');
            }, 2000);
        }
        
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
        }
        
        // Auto-fill for testing
        document.getElementById('shopDomain').value = 'test-store.myshopify.com';
    </script>
</body>
</html>
